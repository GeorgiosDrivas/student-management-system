import{r,j as e,L as N,b as _,u as E}from"./index-BExzwnyI.js";import{C as g}from"./CircularProgress-Pm9YAxIP.js";import{i as S}from"./styled-w-B3J0jJ.js";import{r as b}from"./createSvgIcon-WBqdh8H9.js";function D(){const[t,l]=r.useState([]),[s,n]=r.useState([]);let a=0;if(r.useEffect(()=>{(async()=>{try{const c=await fetch("https://student-management-system-zm51.onrender.com/courses");if(!c.ok)throw new Error("Failed to fetch students data");const m=await c.json();l(m)}catch{setError("Failed to fetch students data")}})()},[]),r.useEffect(()=>{(async()=>{try{const c=await fetch("https://student-management-system-zm51.onrender.com/semester");if(!c.ok)throw new Error("Failed to fetch students data");const m=await c.json();n(m)}catch{setError("Failed to fetch students data")}})()},[]),t.courses){let d=0;const c=t.courses.filter(f=>f.semester==="Summer Semester");let m=c.length;c.forEach(f=>{const j=f.midterm_grade;let u;j>=90?u=4:j>=80?u=3:j>=70?u=2:j>=60?u=1:u=0,d+=u});let v=d/m;a=Math.min(v,4),a=Math.round(a*100)/100}const i=a/4*100;let h="",o="",x=0;s.semester&&s.semester.length>0&&(h=new Date(s.semester[0].start.slice(0,10)),o=new Date(s.semester[0].end.slice(0,10)));function y(d,c){const m=new Date,v=c.getTime()-d.getTime();return(m.getTime()-d.getTime())/v*100}if(h!==""&&o!==""){const d=y(h,o);x=Math.round(d.toFixed(2))}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"summaries",children:[e.jsxs("div",{className:"gpa_summary position-relative",children:[e.jsx("div",{className:"position-absolute gpa_summary_content summary_content",children:e.jsx("p",{className:"text-center",children:a})}),e.jsx(g,{thickness:1.5,size:"10em",variant:"determinate",className:"progressGPA",value:i}),e.jsx("p",{className:"summary-text",children:"Semester's GPA"})]}),e.jsxs("div",{className:"semester_summary position-relative",children:[e.jsx("div",{className:"position-absolute semester_summary_content summary_content",children:e.jsx("p",{className:"text-center",children:x+"%"})}),e.jsx(g,{thickness:1.5,size:"10em",variant:"determinate",className:"progressSummary",value:x}),e.jsx("p",{className:"summary-text",children:"Semester Completion"})]})]})})})})})}function F(){const[t,l]=r.useState([]);return r.useEffect(()=>{(async()=>{try{const n=await fetch("https://student-management-system-zm51.onrender.com/courses");if(!n.ok)throw new Error("Failed to fetch students data");const a=await n.json();l(a)}catch{setError("Failed to fetch students data")}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"summary-title mb-5",children:e.jsx("h2",{children:"Current Semester"})})})}),e.jsx("div",{className:"row",children:t.courses?t.courses.filter(s=>s.semester==="Summer Semester").map(s=>e.jsx("div",{className:"col-12 col-lg-6",children:e.jsxs("div",{id:"dashboard_single_course",className:"mb-5 accordion-item",children:[e.jsx("h2",{className:"text-center",children:s.course_name}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{children:["Taught by: ",s.course_teacher]}),e.jsxs("p",{children:["Grade: ",e.jsx("span",{className:"fw-bold grade-span",children:s.midterm_grade})," out of 100"]})]})]})},s._id)):null}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"sem-btn d-flex justify-content-center",children:e.jsx(N,{className:"button",to:"/semester",title:"View all semesters",children:"View all semesters"})})})})]})}function U(){const[t,l]=r.useState([]);return r.useEffect(()=>{(async()=>{try{const n=await fetch("https://student-management-system-zm51.onrender.com/news");if(!n.ok)throw new Error("Failed to fetch students data");const a=await n.json();l(a)}catch{setError("Failed to fetch students data")}})()},[]),e.jsx(e.Fragment,{children:e.jsx("section",{className:"dashboard-section position-relative",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"summary-title mb-5",children:e.jsx("h2",{className:"text-center",children:"News"})})})}),e.jsxs("div",{className:"row",children:[t&&t.news?t.news.map(s=>e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"article-wrap",children:[e.jsx("h2",{children:s.news_title}),e.jsx("div",{className:"article-content",children:e.jsx("p",{children:s.news_desc})})]},s._id)},s._id)):null,e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-center",children:e.jsx(N,{to:"/news",title:"View all news",className:"button",children:"View all news"})})})]})]})})})}function k(){const t={year:"numeric",month:"numeric",day:"numeric"},l=new Date().toLocaleDateString("en-US",t),[s,n]=r.useState([]);return r.useEffect(()=>{(async()=>{try{const i=await fetch("https://student-management-system-zm51.onrender.com/events");if(!i.ok)throw new Error("Failed to fetch students data");const h=await i.json();n(h)}catch{setError("Failed to fetch students data")}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"summary-title mb-5",children:e.jsx("h2",{className:"text-center",children:"Today's Events"})})})}),e.jsxs("div",{className:"row",children:[s&&s.events?s.events.filter(a=>{const i=new Date(a.event_date).toLocaleDateString("en-US",t);return l===i}).map(a=>e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"text-start m-0",children:a.event_name}),e.jsx("div",{className:"event_content m-0",children:e.jsxs("p",{className:"m-0",children:["Place: ",e.jsx("span",{className:"fw-bold",children:a.event_place})]})})]})},a._id)):null,s&&s.events&&s.events.every(a=>{const i=new Date(a.event_date).toLocaleDateString("en-US",t);return l!==i})&&e.jsx("div",{className:"col-12",children:e.jsx("p",{className:"text-center",children:"There are no events happening today"})})]}),e.jsx("div",{className:"w-100 d-flex justify-content-center",children:e.jsx(N,{className:"button",to:"/events",title:"View all events",children:"View all events"})})]})})}var p={},z=S;Object.defineProperty(p,"__esModule",{value:!0});var w=p.default=void 0,L=z(b()),P=e;w=p.default=(0,L.default)((0,P.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");function G(){const[t,l]=r.useState([]),{logout:s,isAuthenticated:n}=_(),a=E();r.useEffect(()=>{(async()=>{try{const o=await fetch("https://student-management-system-zm51.onrender.com/students");if(!o.ok)throw new Error("Failed to fetch students data");const x=await o.json();l(x)}catch(o){console.log(o)}})()},[]),r.useEffect(function(){n||a("/login",{replace:!0})},[n,a]);function i(){s()}return e.jsx(e.Fragment,{children:e.jsx("main",{id:"main",children:e.jsxs("div",{className:"container-fluid p-0",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx("section",{className:"position-relative",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"greeting-text mb-5 greetings-message",children:t.students?e.jsxs("h1",{children:["Greetings, ",t.students[0].name,"!"]}):null})})})})})}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx("section",{className:"profile-details-section",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:t.students?e.jsxs("div",{className:"profile-details d-flex align-items-center mb-3",children:[e.jsx("div",{className:"profile-pic position-relative",children:e.jsx("img",{src:t.students[0].image,alt:t.students[0].name+"`s Image"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"m-0 profile-text text-center",children:[t.students[0].name," ",t.students[0].surname]}),e.jsx("p",{className:"m-0 profile-year",children:t.students[0].year})]}),e.jsx("div",{className:"ms-lg-4",children:e.jsx("button",{className:"logout-btn",onClick:i,children:e.jsx(w,{})})})]}):null})})})})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-lg-8",children:[e.jsx("section",{className:"dashboard-section position-relative",children:e.jsx(D,{})}),e.jsx("section",{className:"dashboard-section position-relative semester-section",children:e.jsx("div",{className:"container",children:e.jsx(F,{})})})]}),e.jsx("div",{className:"col-12 col-lg-4",children:e.jsxs("div",{className:"right-sidebar py-4",children:[e.jsx(U,{}),e.jsx(k,{})]})})]})]})})})}export{G as default};
